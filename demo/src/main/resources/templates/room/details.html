<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Detalii Cameră</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">

<div class="card mb-4">
    <div class="card-header bg-info text-white">
        <h3>Detalii Cameră</h3>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <p><strong>Număr Cameră:</strong> <span th:text="${room.number}">101</span></p>
                <p><strong>Capacitate:</strong> <span th:text="${room.capacity}">2</span> locuri</p>
            </div>
            <div class="col-md-6">
                <p><strong>Spital:</strong> <span th:text="${room.hospital.name}">Spital X</span></p>
                <p><strong>Status:</strong> <span class="badge bg-secondary" th:text="${room.status}">Occupied</span></p>
            </div>
        </div>
    </div>
</div>

<h4>Programări în această cameră (Appointments)</h4>

<div th:if="${#lists.isEmpty(room.appointments)}" class="alert alert-warning">
    Nu există programări asociate acestei camere.
</div>

<table th:unless="${#lists.isEmpty(room.appointments)}" class="table table-hover table-bordered">
    <thead class="table-light">
    <tr>
        <th>ID Programare</th>
        <th>Data Internării</th>
        <th>Pacient</th>
        <th>Status</th>
        <th>Medic</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="app : ${room.appointments}">
        <td th:text="${app.id}">1</td>
        <td th:text="${app.admissionDate}">2024-01-01</td>
        <td th:text="${app.patient != null} ? ${app.patient.name} : 'N/A'">Ion Popescu</td>
        <td th:text="${app.status}">ACTIVE</td>
        <td th:text="${app.medicalStaff != null} ? ${app.medicalStaff.name} : 'N/A'">Dr. House</td>
    </tr>
    </tbody>
</table>

<div class="mt-3">
    <a href="/rooms" class="btn btn-secondary">Înapoi la Listă</a>
    <a th:href="@{/rooms/edit/{id}(id=${room.id})}" class="btn btn-warning">Editează Cameră</a>
</div>

</body>
</html>